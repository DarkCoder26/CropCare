<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CropCare - Smart Farming Assistant</title>
    <style>
        /* All existing CSS styles remain the same */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary-color: #2E7D32;
            --secondary-color: #4CAF50;
            --accent-color: #66BB6A;
            --danger-color: #f44336;
            --warning-color: #ff9800;
            --success-color: #4caf50;
            --info-color: #2196f3;
            --light-bg: #f8f9fa;
            --dark-text: #333;
            --border-color: #e0e0e0;
        }

        body {
            background: var(--light-bg);
            color: var(--dark-text);
            line-height: 1.6;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 1rem 2rem;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .logo span {
            margin-right: 10px;
            font-size: 2rem;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .weather-widget {
            background: rgba(255, 255, 255, 0.2);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        /* IMPROVED LANGUAGE SELECTOR */
        .language-switcher {
            position: relative;
        }

        .language-switcher select {
            background: rgba(24, 238, 120, 0.2);
            color: rgb(20, 20, 20);
            border: none;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            appearance: none;
            padding-right: 30px;
            min-width: 140px;
            transition: all 0.3s;
        }

        .language-switcher select:hover {
            background: rgba(10, 10, 10, 0.3);
        }

        .language-switcher::after {
            content: "üåê";
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
            font-size: 1.1rem;
        }

        /* Game Button */
        .game-btn {
            background: var(--warning-color);
            color: rgb(19, 18, 18);
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: bold;
        }

        .game-btn:hover {
            background: #e68900;
            transform: translateY(-2px);
        }

        /* NEW PROFILE SECTION STYLES */
        .profile-section {
            position: relative;
            display: flex;
            align-items: center;
        }

        .profile-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }

        .profile-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .profile-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            width: 300px;
            padding: 1.5rem;
            margin-top: 10px;
            z-index: 1001;
            display: none;
            color: var(--dark-text);
        }

        .profile-dropdown.active {
            display: block;
            animation: fadeIn 0.3s ease-in;
        }

        .profile-header {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }

        .profile-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            margin-right: 15px;
        }

        .profile-name {
            font-weight: bold;
            font-size: 1.2rem;
        }

        .profile-email {
            font-size: 0.9rem;
            color: #666;
        }

        .profile-details {
            margin-bottom: 1rem;
        }

        .profile-detail {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #f0f0f0;
        }

        .profile-detail:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .detail-label {
            font-weight: 500;
            color: #666;
        }

        .detail-value {
            font-weight: 600;
        }

        .crop-info {
            background: var(--light-bg);
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
        }

        .crop-item-small {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        .crop-item-small:last-child {
            margin-bottom: 0;
        }

        .logout-btn {
            width: 100%;
            background: var(--danger-color);
            color: white;
            border: none;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 15px;
            transition: all 0.3s;
        }

        .logout-btn:hover {
            background: #d32f2f;
        }

        /* All other CSS styles remain exactly the same */
        /* Main Container */
        .main-container {
            margin-top: 80px;
            min-height: calc(100vh - 80px);
            display: flex;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: white;
            border-right: 1px solid var(--border-color);
            padding: 2rem 1rem;
            position: fixed;
            height: calc(100vh - 80px);
            overflow-y: auto;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            margin: 8px 0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--dark-text);
            text-decoration: none;
        }

        .nav-item:hover {
            background: var(--light-bg);
            color: var(--primary-color);
        }

        .nav-item.active {
            background: var(--primary-color);
            color: white;
        }

        .nav-item i {
            margin-right: 12px;
            font-size: 1.2rem;
            width: 20px;
        }

        /* Content Area */
        .content-area {
            margin-left: 280px;
            padding: 2rem;
            flex: 1;
        }

        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .card-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        .card-icon {
            font-size: 1.5rem;
            padding: 8px;
            border-radius: 10px;
            background: var(--light-bg);
        }

        /* Weather Card */
        .weather-card {
            background: linear-gradient(135deg, #87CEEB, #4682B4);
            color: white;
        }

        .weather-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .temperature {
            font-size: 3rem;
            font-weight: bold;
        }

        .weather-details {
            text-align: right;
        }

        /* Crop Status */
        .crop-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }

        .crop-item:last-child {
            border-bottom: none;
        }

        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .status-healthy {
            background: #e8f5e8;
            color: #2e7d32;
        }

        .status-warning {
            background: #fff3e0;
            color: #f57c00;
        }

        .status-danger {
            background: #ffebee;
            color: #d32f2f;
        }

        /* AI Chat Interface */
        .chat-container {
            height: 400px;
            display: flex;
            flex-direction: column;
            border: 1px solid var(--border-color);
            border-radius: 15px;
            overflow: hidden;
        }

        .chat-messages {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
            background: #fafafa;
        }

        .message {
            margin-bottom: 15px;
            display: flex;
            animation: fadeIn 0.3s ease-in;
        }

        .message.user {
            justify-content: flex-end;
        }

        .message-content {
            max-width: 70%;
            padding: 12px 18px;
            border-radius: 18px;
            font-size: 0.9rem;
        }

        .message.bot .message-content {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 18px 18px 18px 4px;
        }

        .message.user .message-content {
            background: var(--primary-color);
            color: white;
            border-radius: 18px 18px 4px 18px;
        }

        .chat-input-area {
            display: flex;
            padding: 1rem;
            background: white;
            border-top: 1px solid var(--border-color);
        }

        .chat-input {
            flex: 1;
            padding: 12px 18px;
            border: 1px solid var(--border-color);
            border-radius: 25px;
            margin-right: 10px;
            font-size: 0.9rem;
        }

        .chat-send-btn,
        .voice-btn {
            width: 45px;
            height: 45px;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 5px;
            transition: all 0.3s;
        }

        .chat-send-btn {
            background: var(--primary-color);
            color: white;
        }

        .voice-btn {
            background: var(--warning-color);
            color: white;
        }

        /* Quick Actions */
        .quick-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .quick-action-btn {
            background: var(--light-bg);
            border: 1px solid var(--border-color);
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s;
        }

        .quick-action-btn:hover {
            background: var(--primary-color);
            color: white;
        }

        /* Image Upload Area */
        .image-upload {
            border: 2px dashed var(--border-color);
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .image-upload:hover {
            border-color: var(--primary-color);
            background: var(--light-bg);
        }

        .image-upload.dragover {
            border-color: var(--primary-color);
            background: rgba(76, 175, 80, 0.1);
        }

        .upload-icon {
            font-size: 3rem;
            color: var(--border-color);
            margin-bottom: 1rem;
        }

        /* Loading States */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s;
            }

            .sidebar.mobile-open {
                transform: translateX(0);
            }

            .content-area {
                margin-left: 0;
                padding: 1rem;
            }

            .header-content {
                padding: 0 1rem;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .mobile-menu-btn {
                display: block;
                background: none;
                border: none;
                color: white;
                font-size: 1.5rem;
                cursor: pointer;
            }

            .language-switcher select {
                min-width: 120px;
            }

            .profile-dropdown {
                width: 280px;
                right: -10px;
            }
        }

        /* Hide mobile menu button on desktop */
        .mobile-menu-btn {
            display: none;
        }

        /* Section Visibility */
        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 100px;
            right: 20px;
            background: white;
            border: 1px solid var(--border-color);
            border-left: 4px solid var(--primary-color);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            z-index: 1001;
            transform: translateX(400px);
            transition: transform 0.3s;
        }

        .notification.show {
            transform: translateX(0);
        }

        /* NEW STYLES FOR IMPROVED SECTIONS */

        /* Crop Advisory Improvements */
        .crop-calendar {
            margin-top: 20px;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .calendar-nav {
            display: flex;
            gap: 10px;
        }

        .calendar-nav-btn {
            background: var(--light-bg);
            border: 1px solid var(--border-color);
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }

        .calendar-day {
            padding: 10px;
            text-align: center;
            border-radius: 5px;
            background: #f9f9f9;
            min-height: 60px;
        }

        .calendar-day.header {
            background: var(--primary-color);
            color: white;
            font-weight: bold;
        }

        .calendar-day.today {
            background: var(--accent-color);
            color: white;
            font-weight: bold;
        }

        .calendar-day.has-task {
            background: #fff3e0;
            border: 1px solid var(--warning-color);
        }

        .task-list {
            margin-top: 20px;
        }

        .task-item {
            display: flex;
            align-items: center;
            padding: 10px;
            margin: 8px 0;
            background: var(--light-bg);
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
        }

        .task-icon {
            margin-right: 10px;
            font-size: 1.2rem;
        }

        /* Disease Scanner Styles */
        .disease-item {
            padding: 15px;
            margin: 10px 0;
            background: var(--light-bg);
            border-radius: 10px;
            border-left: 4px solid var(--warning-color);
            cursor: pointer;
            transition: all 0.3s;
        }

        .disease-item:hover {
            background: #fff3e0;
            transform: translateX(5px);
        }

        .disease-item h4 {
            color: var(--dark-text);
            margin-bottom: 5px;
        }

        .disease-item p {
            color: #666;
            font-size: 0.9rem;
        }

        /* Game Section Styles */
        .game-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
        }

        .game-stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            display: block;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .game-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .game-feature {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .game-feature-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .play-btn {
            background: var(--warning-color);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s;
        }

        .play-btn:hover {
            background: #e68900;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        /* Dashboard Stats */
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .dashboard-stat {
            background: white;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            border-left: 4px solid var(--primary-color);
        }

        .dashboard-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .dashboard-label {
            font-size: 0.9rem;
            color: var(--dark-text);
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <button class="mobile-menu-btn" onclick="toggleMobileSidebar()">‚ò∞</button>
            <div class="logo">
                <span>üå±</span>
                <span id="logo-text">CropCare</span>
            </div>
            <div class="user-info">
                <div class="weather-widget" id="headerWeather">
                    <span id="location-text">üìç Kerala</span> ‚Ä¢ <span id="temp-text">24¬∞C</span> <span
                        id="weather-icon">‚òÄÔ∏è</span>
                </div>
                <button class="game-btn" onclick="redirectToGame()">
                    üéÆ Play Game
                </button>
                <div class="language-switcher">
                    <select id="languageSelector" onchange="changeLanguage(this.value)">
                        <option value="en">English</option>
                        <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
                        <option value="pa">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä</option>
                        <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
                        <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
                        <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
                        <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä</option>
                        <option value="gu">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä</option>
                        <option value="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤°</option>
                        <option value="ml">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç</option>
                    </select>
                </div>
                
                <!-- NEW PROFILE SECTION -->
                <div class="profile-section">
                    <button class="profile-btn" onclick="toggleProfileDropdown()">
                        üë§ Satish Chaudhary
                    </button>
                    <div class="profile-dropdown" id="profileDropdown">
                        <div class="profile-header">
                            <div class="profile-avatar">SC</div>
                            <div>
                                <div class="profile-name">Satish Chaudhary</div>
                                <div class="profile-email">satish.chaudhary@example.com</div>
                            </div>
                        </div>
                        <div class="profile-details">
                            <div class="profile-detail">
                                <span class="detail-label">Phone:</span>
                                <span class="detail-value">+91 98765 43210</span>
                            </div>
                            <div class="profile-detail">
                                <span class="detail-label">Location:</span>
                                <span class="detail-value">Ludhiana, Punjab</span>
                            </div>
                            <div class="profile-detail">
                                <span class="detail-label">Farm Size:</span>
                                <span class="detail-value">10 acres</span>
                            </div>
                            <div class="profile-detail">
                                <span class="detail-label">Member Since:</span>
                                <span class="detail-value">Jan 2023</span>
                            </div>
                        </div>
                        <div class="crop-info">
                            <div style="font-weight: bold; margin-bottom: 8px;">Current Crops</div>
                            <div class="crop-item-small">
                                <span>Wheat</span>
                                <span>5 acres</span>
                            </div>
                            <div class="crop-item-small">
                                <span>Rice</span>
                                <span>3 acres</span>
                            </div>
                            <div class="crop-item-small">
                                <span>Cotton</span>
                                <span>2 acres</span>
                            </div>
                        </div>
                        <button class="logout-btn" onclick="logout()">Logout</button>
                         
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="main-container">
        <!-- Sidebar -->
        <nav class="sidebar" id="sidebar">
            <div class="nav-item active" onclick="showSection('dashboard')">
                <i>üè†</i> <span id="nav-dashboard">Dashboard</span>
            </div>
            <div class="nav-item" onclick="showSection('chat')">
                <i>ü§ñ</i> <span id="nav-ai">AI Assistant</span>
            </div>
            <div class="nav-item" onclick="showSection('crops')">
                <i>üåæ</i> <span id="nav-crops">Crop Advisory & Disease Scanner</span>
            </div>
            <div class="nav-item" onclick="showSection('weather')">
                <i>üå¶Ô∏è</i> <span id="nav-weather">Weather</span>
            </div>
        </nav>

        <!-- Content Area -->
        <main class="content-area">
            <!-- Dashboard Section -->
            <section id="dashboard" class="content-section active">
                <h2 style="margin-bottom: 2rem; color: var(--primary-color);" id="dashboard-title">Welcome back, Satish
                    Chaudhary! üôè</h2>

                <!-- Dashboard Stats -->
                <div class="dashboard-stats">
                    <div class="dashboard-stat">
                        <div class="dashboard-value" id="dashboardCoins">100</div>
                        <div class="dashboard-label" id="dashboard-coins-label">Coins</div>
                    </div>
                    <div class="dashboard-stat">
                        <div class="dashboard-value" id="dashboardXP">0/100</div>
                        <div class="dashboard-label" id="dashboard-xp-label">XP to Next Level</div>
                    </div>
                    <div class="dashboard-stat">
                        <div class="dashboard-value" id="dashboardActiveCrops">0</div>
                        <div class="dashboard-label" id="dashboard-crops-label">Active Crops</div>
                    </div>
                    <div class="dashboard-stat">
                        <div class="dashboard-value" id="dashboardPendingQuests">3</div>
                        <div class="dashboard-label" id="dashboard-quests-label">Pending Quests</div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <!-- Weather Card -->
                    <div class="card weather-card">
                        <div class="card-header">
                            <h3 id="weather-title">Today's Weather</h3>
                            <span id="weather-location">üìç Ludhiana, Punjab</span>
                        </div>
                        <div class="weather-info">
                            <div>
                                <div class="temperature" id="weather-temp">24¬∞</div>
                                <div id="weather-desc">Partly Cloudy</div>
                            </div>
                            <div class="weather-details">
                                <div id="weather-wind">üí® Wind: 12 km/h</div>
                                <div id="weather-humidity">üíß Humidity: 65%</div>
                                <div id="weather-rain">üåßÔ∏è Rain: 20%</div>
                            </div>
                        </div>
                    </div>

                    <!-- Crop Status -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title" id="crop-status-title">Crop Status</h3>
                            <span class="card-icon">üåæ</span>
                        </div>
                        <div class="crop-item">
                            <div>
                                <strong id="crop-wheat">Wheat (5 acres)</strong>
                                <br><small id="crop-wheat-stage">Flowering stage</small>
                            </div>
                            <span class="status-badge status-healthy" id="crop-wheat-status">Healthy</span>
                        </div>
                        <div class="crop-item">
                            <div>
                                <strong id="crop-rice">Rice (3 acres)</strong>
                                <br><small id="crop-rice-stage">Vegetative stage</small>
                            </div>
                            <span class="status-badge status-warning" id="crop-rice-status">Monitor</span>
                        </div>
                        <div class="crop-item">
                            <div>
                                <strong id="crop-cotton">Cotton (2 acres)</strong>
                                <br><small id="crop-cotton-stage">Maturity stage</small>
                            </div>
                            <span class="status-badge status-danger" id="crop-cotton-status">Disease Alert</span>
                        </div>
                    </div>

                    <!-- Quick AI Chat -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title" id="quick-chat-title">Quick Chat</h3>
                            <span class="card-icon">üí¨</span>
                        </div>
                        <div class="quick-actions">
                            <button class="quick-action-btn" onclick="quickChat('weather')" id="btn-weather">Weather
                                Alert</button>
                            <button class="quick-action-btn" onclick="quickChat('fertilizer')"
                                id="btn-fertilizer">Fertilizer Guide</button>
                            <button class="quick-action-btn" onclick="quickChat('disease')" id="btn-disease">Disease Help</button>
                        </div>
                        <div class="chat-container" style="height: 200px;">
                            <div class="chat-messages" id="dashboardChat">
                                <div class="message bot">
                                    <div class="message-content" id="dashboard-welcome">
                                        Hello Satish Chaudhary! How can I help you today? üåæ
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Game Preview -->
                    <div class="card game-section">
                        <h3>üéÆ Farming Game</h3>
                        <p>Complete farming challenges and earn rewards!</p>
                        <div class="game-stats">
                            <div class="stat-item">
                                <span class="stat-value">5</span>
                                <span class="stat-label">Level</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value">1,250</span>
                                <span class="stat-label">XP</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value">3</span>
                                <span class="stat-label">Badges</span>
                            </div>
                        </div>
                        <button class="play-btn" onclick="redirectToGame()">Play Now</button>
                    </div>
                </div>
            </section>

            <!-- AI Chat Section -->
            <section id="chat" class="content-section">
                <h2 style="margin-bottom: 2rem; color: var(--primary-color);" id="ai-title">AI Assistant - CropCare ü§ñ
                </h2>

                <div class="card">
                    <div class="quick-actions">
                        <button class="quick-action-btn" onclick="quickChat('crops')" id="btn-crops">Crop
                            Selection</button>
                        <button class="quick-action-btn" onclick="quickChat('disease')" id="btn-disease">Disease
                            Help</button>
                        <button class="quick-action-btn" onclick="quickChat('weather')" id="btn-weather2">Weather
                            Info</button>
                        <button class="quick-action-btn" onclick="quickChat('fertilizer')"
                            id="btn-fertilizer2">Fertilizer</button>
                        <button class="quick-action-btn" onclick="quickChat('irrigation')"
                            id="btn-irrigation">Irrigation</button>
                    </div>

                    <div class="chat-container">
                        <div class="chat-messages" id="mainChat">
                            <div class="message bot">
                                <div class="message-content" id="ai-welcome">
                                    Namaste Satish Chaudhary ji! üôè Main aapka AI assistant hun. Aap mujhse Hindi,
                                    Punjabi ya English mein baat kar sakte hain. Kya madad kar sakta hun aaj?
                                </div>
                            </div>
                        </div>
                        <div class="chat-input-area">
                            <button class="voice-btn" onclick="startVoiceInput()" title="Voice Input">üé§</button>
                            <input type="text" class="chat-input" id="mainChatInput"
                                placeholder="Kheti, bimari, mausam ke bare mein puchiye..."
                                onkeypress="handleChatEnter(event, 'mainChat')">
                            <button class="chat-send-btn" onclick="sendMessage('mainChat')"
                                title="Send Message">‚û§</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Crop Advisory & Disease Scanner Section - MERGED -->
            <section id="crops" class="content-section">
                <h2 style="margin-bottom: 2rem; color: var(--primary-color);" id="crops-title">Crop Advisory & Disease Scanner üåæüîç</h2>

                <div class="dashboard-grid">
                    <!-- Crop Calendar & Tasks -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title" id="calendar-title">Crop Calendar</h3>
                            <span class="card-icon">üìÖ</span>
                        </div>

                        <div class="crop-calendar">
                            <div class="calendar-header">
                                <h4>November 2023</h4>
                                <div class="calendar-nav">
                                    <button class="calendar-nav-btn" onclick="changeCalendarMonth(-1)">‚Üê</button>
                                    <button class="calendar-nav-btn" onclick="changeCalendarMonth(1)">‚Üí</button>
                                </div>
                            </div>

                            <div class="calendar-grid">
                                <div class="calendar-day header">Sun</div>
                                <div class="calendar-day header">Mon</div>
                                <div class="calendar-day header">Tue</div>
                                <div class="calendar-day header">Wed</div>
                                <div class="calendar-day header">Thu</div>
                                <div class="calendar-day header">Fri</div>
                                <div class="calendar-day header">Sat</div>

                                <!-- Calendar days will be populated by JavaScript -->
                            </div>
                        </div>

                        <div class="task-list">
                            <h4 style="margin: 20px 0 10px 0;" id="tasks-title">Today's Tasks</h4>
                            <div class="task-item">
                                <span class="task-icon">üíß</span>
                                <div>
                                    <strong id="task-irrigation">Irrigate Wheat Field</strong>
                                    <p id="task-irrigation-desc">Field 1 needs watering today</p>
                                </div>
                            </div>
                            <div class="task-item">
                                <span class="task-icon">üå±</span>
                                <div>
                                    <strong id="task-fertilizer">Apply Fertilizer</strong>
                                    <p id="task-fertilizer-desc">Urea application for Rice field</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Disease Scanner -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title" id="upload-title">Disease Scanner</h3>
                            <span class="card-icon">üì∏</span>
                        </div>
                        <div class="image-upload" id="imageUpload"
                            onclick="document.getElementById('imageInput').click()">
                            <div class="upload-icon">üì∑</div>
                            <h4 id="upload-instruction">Click to upload or drag & drop</h4>
                            <p id="upload-desc">Upload image of affected crop for AI analysis</p>
                            <input type="file" id="imageInput" accept="image/*" style="display: none;"
                                onchange="handleImageUpload(event)">
                        </div>
                        <div id="imageAnalysis" style="display: none; margin-top: 1rem;">
                            <div class="loading" id="analysisLoading"></div>
                            <span id="analyzing-text"> Analyzing image...</span>
                        </div>
                        <div id="analysisResult" style="display: none; margin-top: 1rem;"></div>

                        <div style="margin-top: 20px;">
                            <h4 id="common-diseases-title">Common Diseases</h4>
                            <div class="disease-item" onclick="showDiseaseInfo('wheat-rust')">
                                <h4 id="disease-wheat-rust">Wheat Rust</h4>
                                <p id="disease-wheat-rust-desc">Orange-yellow pustules on leaves and stems</p>
                            </div>
                            <div class="disease-item" onclick="showDiseaseInfo('rice-blast')">
                                <h4 id="disease-rice-blast">Rice Blast</h4>
                                <p id="disease-rice-blast-desc">Diamond-shaped lesions with gray centers</p>
                            </div>
                            <div class="disease-item" onclick="showDiseaseInfo('cotton-bollworm')">
                                <h4 id="disease-cotton-bollworm">Cotton Bollworm</h4>
                                <p id="disease-cotton-bollworm-desc">Holes in bolls and leaves, caterpillar damage</p>
                            </div>
                        </div>
                    </div>

                    <!-- Crop Recommendations -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title" id="recommendations-title">Crop Recommendations</h3>
                            <span class="card-icon">üí°</span>
                        </div>

                        <div class="crop-recommendation">
                            <h4 id="recommendations-subtitle">Based on your soil and location</h4>
                            <div class="detail-card">
                                <div class="detail-header">
                                    <strong id="recommendation-wheat">Wheat (Rabi Season)</strong>
                                    <span class="status-badge status-healthy"
                                        id="recommendation-wheat-status">Recommended</span>
                                </div>
                                <p id="recommendation-wheat-varieties">Best varieties: HD-2967, PBW-550</p>
                                <p id="recommendation-wheat-time">Sowing time: Nov 1 - Nov 20</p>
                                <p id="recommendation-wheat-yield">Expected yield: 45-50 quintals/acre</p>
                            </div>

                            <div class="detail-card">
                                <div class="detail-header">
                                    <strong id="recommendation-mustard">Mustard (Rabi Season)</strong>
                                    <span class="status-badge status-healthy"
                                        id="recommendation-mustard-status">Recommended</span>
                                </div>
                                <p id="recommendation-mustard-varieties">Best varieties: RH-749, RH-761</p>
                                <p id="recommendation-mustard-time">Sowing time: Oct 15 - Nov 10</p>
                                <p id="recommendation-mustard-yield">Expected yield: 15-18 quintals/acre</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Weather Section -->
            <section id="weather" class="content-section">
                <h2 style="margin-bottom: 2rem; color: var(--primary-color);" id="weather-forecast-title">Weather
                    Forecast üå¶Ô∏è</h2>

                <div class="dashboard-grid">
                    <div class="card weather-card">
                        <h3 id="current-weather-title">Current Weather</h3>
                        <div class="weather-info">
                            <div>
                                <div class="temperature" id="current-temp">24¬∞</div>
                                <div id="current-desc">Partly Cloudy</div>
                                <div id="current-feels">Feels like 27¬∞C</div>
                            </div>
                            <div class="weather-details">
                                <div id="current-sunrise">üåÖ Sunrise: 6:45 AM</div>
                                <div id="current-sunset">üåá Sunset: 7:20 PM</div>
                                <div id="current-wind">üí® Wind: 12 km/h NW</div>
                                <div id="current-humidity">üíß Humidity: 65%</div>
                                <div id="current-visibility">üëÅÔ∏è Visibility: 10 km</div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title" id="forecast-title">7-Day Forecast</h3>
                            <span class="card-icon">üìÖ</span>
                        </div>
                        <div class="forecast-item">
                            <span id="forecast-today">Today</span>
                            <span>‚òÄÔ∏è 24¬∞/18¬∞</span>
                            <span id="forecast-today-rain">0% rain</span>
                        </div>
                        <div class="forecast-item">
                            <span id="forecast-tomorrow">Tomorrow</span>
                            <span>‚õÖ 26¬∞/19¬∞</span>
                            <span id="forecast-tomorrow-rain">10% rain</span>
                        </div>
                        <div class="forecast-item">
                            <span id="forecast-wednesday">Wednesday</span>
                            <span>üåßÔ∏è 22¬∞/16¬∞</span>
                            <span id="forecast-wednesday-rain">80% rain</span>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title" id="farming-recommendations-title">Farming Recommendations</h3>
                            <span class="card-icon">üí°</span>
                        </div>
                        <div class="recommendation-item">
                            <div class="rec-icon">üíß</div>
                            <div>
                                <strong id="rec-irrigation">Irrigation Alert</strong>
                                <p id="rec-irrigation-desc">Light rain expected Wednesday. Reduce irrigation for wheat
                                    fields.</p>
                            </div>
                        </div>
                        <div class="recommendation-item">
                            <div class="rec-icon">üå±</div>
                            <div>
                                <strong id="rec-spraying">Spraying Advice</strong>
                                <p id="rec-spraying-desc">Good conditions for pesticide application today and tomorrow.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        // NEW PROFILE FUNCTIONS
        function toggleProfileDropdown() {
            const dropdown = document.getElementById('profileDropdown');
            dropdown.classList.toggle('active');
            
            // Close dropdown when clicking outside
            if (dropdown.classList.contains('active')) {
                document.addEventListener('click', closeProfileDropdownOnClickOutside);
            } else {
                document.removeEventListener('click', closeProfileDropdownOnClickOutside);
            }
        }

        function closeProfileDropdownOnClickOutside(event) {
            const dropdown = document.getElementById('profileDropdown');
            const profileBtn = document.querySelector('.profile-btn');
            
            if (!dropdown.contains(event.target) && !profileBtn.contains(event.target)) {
                dropdown.classList.remove('active');
                document.removeEventListener('click', closeProfileDropdownOnClickOutside);
            }
        }

        function logout() {
            showNotification("Logging out...");
            setTimeout(() => {
                // In a real app, this would redirect to login page
                showNotification("You have been logged out successfully.");
                document.getElementById('profileDropdown').classList.remove('active');
                window.location.href="index.html"
            }, 1500);
        }

        // Language translations - Expanded with 10 languages
        const translations = {
            en: {
                // Header
                "logo-text": "CropCare",
                "location-text": "üìç Punjab",
                "temp-text": "24¬∞C",
                "weather-icon": "‚òÄÔ∏è",

                // Navigation
                "nav-dashboard": "Dashboard",
                "nav-ai": "AI Assistant",
                "nav-crops": "Crop Advisory & Disease Scanner",
                "nav-weather": "Weather",

                // Dashboard
                "dashboard-title": "Welcome back, Satish Chaudhary! üôè",
                "dashboard-coins-label": "Coins",
                "dashboard-xp-label": "XP to Next Level",
                "dashboard-crops-label": "Active Crops",
                "dashboard-quests-label": "Pending Quests",
                "weather-title": "Today's Weather",
                "weather-location": "üìç Ludhiana, Punjab",
                "weather-temp": "24¬∞",
                "weather-desc": "Partly Cloudy",
                "weather-wind": "üí® Wind: 12 km/h",
                "weather-humidity": "üíß Humidity: 65%",
                "weather-rain": "üåßÔ∏è Rain: 20%",
                "crop-status-title": "Crop Status",
                "crop-wheat": "Wheat (5 acres)",
                "crop-wheat-stage": "Flowering stage",
                "crop-wheat-status": "Healthy",
                "crop-rice": "Rice (3 acres)",
                "crop-rice-stage": "Vegetative stage",
                "crop-rice-status": "Monitor",
                "crop-cotton": "Cotton (2 acres)",
                "crop-cotton-stage": "Maturity stage",
                "crop-cotton-status": "Disease Alert",
                "quick-chat-title": "Quick Chat",
                "btn-weather": "Weather Alert",
                "btn-fertilizer": "Fertilizer Guide",
                "btn-disease": "Disease Help",
                "dashboard-welcome": "Hello Satish Chaudhary! How can I help you today? üåæ",

                // AI Chat
                "ai-title": "AI Assistant - CropCare ü§ñ",
                "btn-crops": "Crop Selection",
                "btn-disease": "Disease Help",
                "btn-weather2": "Weather Info",
                "btn-fertilizer2": "Fertilizer",
                "btn-irrigation": "Irrigation",
                "ai-welcome": "Hello Satish Chaudhary! I'm your AI assistant. You can talk to me in Hindi, Punjabi or English. How can I help you today?",
                "chat-placeholder": "Ask about farming, diseases, weather...",

                // Crop Advisory & Disease Scanner
                "crops-title": "Crop Advisory & Disease Scanner üåæüîç",
                "calendar-title": "Crop Calendar",
                "tasks-title": "Today's Tasks",
                "task-irrigation": "Irrigate Wheat Field",
                "task-irrigation-desc": "Field 1 needs watering today",
                "task-fertilizer": "Apply Fertilizer",
                "task-fertilizer-desc": "Urea application for Rice field",
                "upload-title": "Disease Scanner",
                "upload-instruction": "Click to upload or drag & drop",
                "upload-desc": "Upload image of affected crop for AI analysis",
                "analyzing-text": "Analyzing image...",
                "common-diseases-title": "Common Diseases",
                "disease-wheat-rust": "Wheat Rust",
                "disease-wheat-rust-desc": "Orange-yellow pustules on leaves and stems",
                "disease-rice-blast": "Rice Blast",
                "disease-rice-blast-desc": "Diamond-shaped lesions with gray centers",
                "disease-cotton-bollworm": "Cotton Bollworm",
                "disease-cotton-bollworm-desc": "Holes in bolls and leaves, caterpillar damage",
                "recommendations-title": "Crop Recommendations",
                "recommendations-subtitle": "Based on your soil and location",
                "recommendation-wheat": "Wheat (Rabi Season)",
                "recommendation-wheat-status": "Recommended",
                "recommendation-wheat-varieties": "Best varieties: HD-2967, PBW-550",
                "recommendation-wheat-time": "Sowing time: Nov 1 - Nov 20",
                "recommendation-wheat-yield": "Expected yield: 45-50 quintals/acre",
                "recommendation-mustard": "Mustard (Rabi Season)",
                "recommendation-mustard-status": "Recommended",
                "recommendation-mustard-varieties": "Best varieties: RH-749, RH-761",
                "recommendation-mustard-time": "Sowing time: Oct 15 - Nov 10",
                "recommendation-mustard-yield": "Expected yield: 15-18 quintals/acre",

                // Weather
                "weather-forecast-title": "Weather Forecast üå¶Ô∏è",
                "current-weather-title": "Current Weather",
                "current-temp": "24¬∞",
                "current-desc": "Partly Cloudy",
                "current-feels": "Feels like 27¬∞C",
                "current-sunrise": "üåÖ Sunrise: 6:45 AM",
                "current-sunset": "üåá Sunset: 7:20 PM",
                "current-wind": "üí® Wind: 12 km/h NW",
                "current-humidity": "üíß Humidity: 65%",
                "current-visibility": "üëÅÔ∏è Visibility: 10 km",
                "forecast-title": "7-Day Forecast",
                "forecast-today": "Today",
                "forecast-today-rain": "0% rain",
                "forecast-tomorrow": "Tomorrow",
                "forecast-tomorrow-rain": "10% rain",
                "forecast-wednesday": "Wednesday",
                "forecast-wednesday-rain": "80% rain",
                "farming-recommendations-title": "Farming Recommendations",
                "rec-irrigation": "Irrigation Alert",
                "rec-irrigation-desc": "Light rain expected Wednesday. Reduce irrigation for wheat fields.",
                "rec-spraying": "Spraying Advice",
                "rec-spraying-desc": "Good conditions for pesticide application today and tomorrow.",
            },
            hi: {
                "logo-text": "‡§ï‡•ç‡§∞‡•â‡§™‡§ï‡•á‡§Ø‡§∞",
                "nav-crops": "‡§´‡§∏‡§≤ ‡§∏‡§≤‡§æ‡§π ‡§î‡§∞ ‡§∞‡•ã‡§ó ‡§∏‡•ç‡§ï‡•à‡§®‡§∞",
                "dashboard-title": "‡§∏‡§§‡•Ä‡§∂ ‡§ö‡•å‡§ß‡§∞‡•Ä, ‡§µ‡§æ‡§™‡§∏‡•Ä ‡§™‡§∞ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à! üôè",
                "ai-welcome": "‡§®‡§Æ‡§∏‡•ç‡§§‡•á ‡§∏‡§§‡•Ä‡§∂ ‡§ö‡•å‡§ß‡§∞‡•Ä ‡§ú‡•Ä! üôè ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡§æ AI ‡§∏‡§π‡§æ‡§Ø‡§ï ‡§π‡•Ç‡§Ç‡•§ ‡§Ü‡§™ ‡§Æ‡•Å‡§ù‡§∏‡•á ‡§π‡§ø‡§Ç‡§¶‡•Ä, ‡§™‡§Ç‡§ú‡§æ‡§¨‡•Ä ‡§Ø‡§æ ‡§Ö‡§Ç‡§ó‡•ç‡§∞‡•á‡§ú‡•Ä ‡§Æ‡•á‡§Ç ‡§¨‡§æ‡§§ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§Ü‡§ú ‡§Æ‡•à‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§ï‡•ç‡§Ø‡§æ ‡§Æ‡§¶‡§¶ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ ‡§π‡•Ç‡§Ç?"
            },
            pa: {
                "logo-text": "‡®ï‡©ç‡®∞‡®æ‡®™‡®ï‡©á‡®Ö‡®∞",
                "nav-crops": "‡®´‡®∏‡®≤ ‡®∏‡®≤‡®æ‡®π ‡®Ö‡®§‡©á ‡®∞‡©ã‡®ó ‡®∏‡®ï‡©à‡®®‡®∞",
                "dashboard-title": "‡®∏‡®§‡©Ä‡®∏‡®º ‡®ö‡©å‡®ß‡®∞‡©Ä, ‡®µ‡®æ‡®™‡®∏‡©Ä '‡®§‡©á ‡®∏‡®µ‡®æ‡®ó‡®§ ‡®π‡©à! üôè",
                "ai-welcome": "‡®∏‡®§ ‡®∏‡©ç‡®∞‡©Ä ‡®Ö‡®ï‡®æ‡®≤ ‡®∏‡®§‡©Ä‡®∏‡®º ‡®ö‡©å‡®ß‡®∞‡©Ä ‡®ú‡•Ä! üôè ‡®Æ‡©à‡®Ç ‡®§‡©Å‡®π‡®æ‡®°‡®æ AI ‡®∏‡®π‡®æ‡®á‡®ï ‡®π‡®æ‡®Ç‡•§ ‡®§‡©Å‡®∏‡©Ä‡®Ç ‡®Æ‡©á‡®∞‡©á ‡®®‡®æ‡®≤ ‡®π‡®ø‡©∞‡®¶‡©Ä, ‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä ‡®ú‡®æ‡®Ç ‡®Ö‡©∞‡®ó‡®∞‡©á‡®ú‡®º‡©Ä ‡®µ‡®ø‡©±‡®ö ‡®ó‡©±‡®≤ ‡®ï‡®∞ ‡®∏‡®ï‡®¶‡©á ‡®π‡©ã‡•§ ‡®Ö‡©±‡®ú ‡®Æ‡©à‡®Ç ‡®§‡©Å‡®π‡®æ‡®°‡©Ä ‡®ï‡®ø‡®µ‡©á‡®Ç ‡®Æ‡®¶‡®¶ ‡®ï‡®∞ ‡®∏‡®ï‡®¶‡®æ ‡®π‡®æ‡®Ç?"
            },
            te: {
                "logo-text": "‡∞ï‡±ç‡∞∞‡∞æ‡∞™‡±ç ‡∞ï‡±á‡∞∞‡±ç",
                "nav-crops": "‡∞™‡∞Ç‡∞ü ‡∞∏‡∞≤‡∞π‡∞æ & ‡∞µ‡±ç‡∞Ø‡∞æ‡∞ß‡∞ø ‡∞∏‡±ç‡∞ï‡∞æ‡∞®‡∞∞‡±ç",
                "dashboard-title": "‡∞∏‡∞§‡±Ä‡∞∑‡±ç ‡∞ö‡±å‡∞¶‡∞∞‡∞ø, ‡∞§‡∞ø‡∞∞‡∞ø‡∞ó‡∞ø ‡∞∞‡∞æ‡∞µ‡∞°‡∞Ç ‡∞∏‡±ç‡∞µ‡∞æ‡∞ó‡∞§‡∞Ç! üôè"
            },
            ta: {
                "logo-text": "‡Æï‡Æø‡Æ∞‡Ææ‡Æ™‡Øç ‡Æï‡Øá‡Æ∞‡Øç",
                "nav-crops": "‡Æ™‡ÆØ‡Æø‡Æ∞‡Øç ‡ÆÜ‡Æ≤‡Øã‡Æö‡Æ©‡Øà & ‡Æ®‡Øã‡ÆØ‡Øç ‡Æ∏‡Øç‡Æï‡Øá‡Æ©‡Æ∞‡Øç",
                "dashboard-title": "‡Æö‡Æ§‡ØÄ‡Æ∑‡Øç ‡Æö‡Æµ‡ØÅ‡Æ§‡Øç‡Æ∞‡Æø, ‡Æ§‡Æø‡Æ∞‡ØÅ‡ÆÆ‡Øç‡Æ™‡Æø ‡Æµ‡Æ∞‡Æµ‡Øá‡Æ±‡Øç‡Æï‡Æø‡Æ±‡Øã‡ÆÆ‡Øç! üôè"
            },
            bn: {
                "logo-text": "‡¶ï‡ßç‡¶∞‡¶™‡¶ï‡ßá‡¶∞",
                "nav-crops": "‡¶´‡¶∏‡¶≤ ‡¶™‡¶∞‡¶æ‡¶Æ‡¶∞‡ßç‡¶∂ ‡¶ì ‡¶∞‡ßã‡¶ó ‡¶∏‡ßç‡¶ï‡ßç‡¶Ø‡¶æ‡¶®‡¶æ‡¶∞",
                "dashboard-title": "‡¶∏‡¶§‡ßÄ‡¶∂ ‡¶ö‡ßå‡¶ß‡ßÅ‡¶∞‡ßÄ, ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ü‡¶∏‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∏‡ßç‡¶¨‡¶æ‡¶ó‡¶§‡¶Æ! üôè"
            },
            mr: {
                "logo-text": "‡§ï‡•ç‡§∞‡•â‡§™‡§ï‡•á‡§Ö‡§∞",
                "nav-crops": "‡§™‡•Ä‡§ï ‡§∏‡§≤‡•ç‡§≤‡§æ‡§ó‡§æ‡§∞ ‡§Ü‡§£‡§ø ‡§∞‡•ã‡§ó ‡§∏‡•ç‡§ï‡•Ö‡§®‡§∞",
                "dashboard-title": "‡§∏‡§§‡•Ä‡§∂ ‡§ö‡•å‡§ß‡§∞‡•Ä, ‡§™‡§∞‡§§ ‡§Ø‡•á‡§£‡•ç‡§Ø‡§æ‡§¨‡§¶‡•ç‡§¶‡§≤ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§Ü‡§π‡•á! üôè"
            },
            gu: {
                "logo-text": "‡™ï‡´ç‡™∞‡´ã‡™™‡™ï‡´á‡™∞",
                "nav-crops": "‡™ï‡™™‡™æ‡™∏ ‡™∏‡™≤‡™æ‡™π ‡™Ö‡™®‡´á ‡™∞‡´ã‡™ó ‡™∏‡´ç‡™ï‡´á‡™®‡™∞",
                "dashboard-title": "‡™∏‡™§‡´Ä‡™∂ ‡™ö‡´å‡™ß‡™∞‡´Ä, ‡™™‡™æ‡™õ‡™æ ‡™Ü‡™µ‡™µ‡™æ ‡™Æ‡™æ‡™ü‡´á ‡™∏‡´ç‡™µ‡™æ‡™ó‡™§ ‡™õ‡´á! üôè"
            },
            kn: {
                "logo-text": "‡≤ï‡≥ç‡≤∞‡≤æ‡≤™‡≥ç ‡≤ï‡≥á‡≤∞‡≥ç",
                "nav-crops": "‡≤¨‡≥Ü‡≤≥‡≥Ü ‡≤∏‡≤≤‡≤π‡≥Ü & ‡≤∞‡≥ã‡≤ó ‡≤∏‡≥ç‡≤ï‡≥ç‡≤Ø‡≤æ‡≤®‡≤∞‡≥ç",
                "dashboard-title": "‡≤∏‡≤§‡≥Ä‡≤∂‡≥ç ‡≤ö‡≥å‡≤ß‡≤∞‡≤ø, ‡≤Æ‡≤∞‡≤≥‡≤ø ‡≤¨‡≤∞‡≥Å‡≤µ‡≥Å‡≤¶‡≤ï‡≥ç‡≤ï‡≥Ü ‡≤∏‡≥ç‡≤µ‡≤æ‡≤ó‡≤§! üôè"
            },
            ml: {
                "logo-text": "‡¥ï‡µç‡¥∞‡µã‡¥™‡µç‡¥™‡µç ‡¥ï‡µÜ‡¥Ø‡µº",
                "nav-crops": "‡¥µ‡¥ø‡¥≥ ‡¥â‡¥™‡¥¶‡µá‡¥∂‡¥Ç & ‡¥∞‡µã‡¥ó ‡¥∏‡µç‡¥ï‡¥æ‡¥®‡µº",
                "dashboard-title": "‡¥∏‡¥§‡µÄ‡¥∑‡µç ‡¥ö‡µó‡¥ß‡¥∞‡¥ø, ‡¥§‡¥ø‡¥∞‡¥ø‡¥ö‡µç‡¥ö‡µÅ‡¥µ‡¥∞‡¥µ‡¥ø‡¥®‡µç ‡¥∏‡µç‡¥µ‡¥æ‡¥ó‡¥§‡¥Ç! üôè"
            }
        };

        // Navigation functions
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });

            // Show selected section
            document.getElementById(sectionId).classList.add('active');

            // Update active nav item
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });

            // Find and activate the clicked nav item
            const navItems = document.querySelectorAll('.nav-item');
            for (let item of navItems) {
                if (item.getAttribute('onclick').includes(sectionId)) {
                    item.classList.add('active');
                    break;
                }
            }

            // Close mobile sidebar if open
            if (window.innerWidth <= 768) {
                document.getElementById('sidebar').classList.remove('mobile-open');
            }
        }

        function toggleMobileSidebar() {
            document.getElementById('sidebar').classList.toggle('mobile-open');
        }

        function changeLanguage(lang) {
            // Update the language selector
            document.getElementById('languageSelector').value = lang;

            // Get translations for selected language
            const langData = translations[lang] || translations.en;

            // Update all elements with translations
            Object.keys(langData).forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    element.textContent = langData[key];

                    // Special handling for input placeholders
                    if (element.tagName === 'INPUT' && element.placeholder) {
                        element.placeholder = langData[key];
                    }
                }
            });

            // Show notification
            const langNames = {
                en: "English",
                hi: "Hindi",
                pa: "Punjabi",
                te: "Telugu",
                ta: "Tamil",
                bn: "Bengali",
                mr: "Marathi",
                gu: "Gujarati",
                kn: "Kannada",
                ml: "Malayalam"
            };

            showNotification(`Language changed to ${langNames[lang]}`);
        }

        // Chat functionality
        function sendMessage(chatId) {
            const inputElement = document.getElementById(chatId === 'mainChat' ? 'mainChatInput' : 'dashboardChatInput');
            const message = inputElement.value.trim();

            if (message) {
                const messagesContainer = document.getElementById(chatId);

                // Add user message
                const userMessage = document.createElement('div');
                userMessage.className = 'message user';
                userMessage.innerHTML = `<div class="message-content">${message}</div>`;
                messagesContainer.appendChild(userMessage);

                // Clear input
                inputElement.value = '';

                // Simulate bot response
                setTimeout(() => {
                    const botMessage = document.createElement('div');
                    botMessage.className = 'message bot';
                    botMessage.innerHTML = `<div class="message-content">${getBotResponse(message)}</div>`;
                    messagesContainer.appendChild(botMessage);

                    // Scroll to bottom
                    messagesContainer.scrollTop = messagesContainer.scrollHeight;
                }, 1000);

                // Scroll to bottom
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }
        }

        function handleChatEnter(event, chatId) {
            if (event.key === 'Enter') {
                sendMessage(chatId);
            }
        }

        function quickChat(topic) {
            const questions = {
                'weather': 'What is the weather forecast for this week?',
                'fertilizer': 'What fertilizer should I use for my wheat crop?',
                'disease': 'How can I identify wheat rust disease?',
                'crops': 'Which crops are best for my soil type?',
                'irrigation': 'How often should I irrigate my rice field?'
            };

            const messagesContainer = document.getElementById('mainChat');

            // Add user message
            const userMessage = document.createElement('div');
            userMessage.className = 'message user';
            userMessage.innerHTML = `<div class='message-content'>${questions[topic]}</div>`;
            messagesContainer.appendChild(userMessage);

            // Show response
            setTimeout(() => {
                const botMessage = document.createElement('div');
                botMessage.className = 'message bot';
                botMessage.innerHTML = `<div class='message-content'>${getBotResponse(topic)}</div>`;
                messagesContainer.appendChild(botMessage);

                // Scroll to bottom
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }, 1000);

            // Switch to chat section
            showSection('chat');

            // Scroll to bottom
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function getBotResponse(input) {
            const lowerInput = input.toLowerCase();
            if (lowerInput.includes('weather') || lowerInput.includes('mausam')) {
                return "This week's forecast: Mostly sunny with temperatures between 22-28¬∞C. Light rain expected on Wednesday. Good conditions for wheat flowering stage. üå§Ô∏è";
            } else if (lowerInput.includes('fertilizer') || lowerInput.includes('khad')) {
                return "For wheat at flowering stage, apply 40 kg Nitrogen per acre as Urea. Also consider Zinc supplementation if not applied earlier. Soil test recommended for precise recommendations. üåæ";
            } else if (lowerInput.includes('disease') || lowerInput.includes('bimari')) {
                return "Wheat rust appears as orange-yellow pustules on leaves. For prevention, use resistant varieties and apply fungicide at first sign. Avoid over-irrigation. ü¶†";
            } else if (lowerInput.includes('crop') || lowerInput.includes('fasal')) {
                return "Based on your soil type (loam) and location (Punjab), recommended crops: Wheat, Rice, Cotton, Maize. Consider crop rotation to maintain soil health. üîÑ";
            } else if (lowerInput.includes('irrigation') || lowerInput.includes('sinchai')) {
                return "For wheat at flowering stage: irrigate every 7-10 days depending on soil moisture. Check soil 2 inches deep - if dry, time to irrigate. üíß";
            } else {
                return "I can help with crop advice, weather information, disease diagnosis, and farming recommendations. What would you like to know? üåæ";
            }
        }

        function startVoiceInput() {
            showNotification("Voice input activated. Speak now...");
            // In a real app, this would use the Web Speech API
            setTimeout(() => {
                showNotification("Voice input received: 'What is the weather forecast?'");
                quickChat('weather');
            }, 2000);
        }

        // Image upload functionality
        function handleImageUpload(event) {
            const file = event.target.files[0];
            if (file) {
                document.getElementById('imageAnalysis').style.display = 'block';
                document.getElementById('analysisResult').style.display = 'none';

                // Simulate AI analysis
                setTimeout(() => {
                    document.getElementById('imageAnalysis').style.display = 'none';
                    document.getElementById('analysisResult').style.display = 'block';
                    document.getElementById('analysisResult').innerHTML = `
                        <h4>Analysis Result</h4>
                        <div class="status-badge status-danger">Disease Detected: Wheat Rust</div>
                        <p style="margin-top: 10px;">Confidence: 92%</p>
                        <p><strong>Recommendations:</strong></p>
                        <ul style="margin-left: 20px; margin-top: 5px;">
                            <li>Apply fungicide containing Tebuconazole</li>
                            <li>Spray early morning or late evening</li>
                            <li>Repeat after 10 days if necessary</li>
                            <li>Avoid over-irrigation</li>
                        </ul>
                    `;
                }, 3000);
            }
        }

        function showDiseaseInfo(disease) {
            const diseaseInfo = {
                'wheat-rust': {
                    name: 'Wheat Rust',
                    symptoms: 'Orange-yellow pustules on leaves and stems',
                    treatment: 'Apply fungicide containing Tebuconazole or Propiconazole'
                },
                'rice-blast': {
                    name: 'Rice Blast',
                    symptoms: 'Diamond-shaped lesions with gray centers and brown borders',
                    treatment: 'Apply fungicides like Tricyclazole or Azoxystrobin'
                },
                'cotton-bollworm': {
                    name: 'Cotton Bollworm',
                    symptoms: 'Holes in bolls and leaves, caterpillar presence',
                    treatment: 'Use biological controls like Trichogramma wasps or approved insecticides'
                }
            };

            const info = diseaseInfo[disease];
            showNotification(`${info.name}: ${info.symptoms}. Treatment: ${info.treatment}`);
        }

        // Game redirect function
        function redirectToGame() {
            // Redirect to the game page
            window.location.href = 'index4.html';
        }

        // Calendar functions
        function generateCalendar() {
            const calendarGrid = document.querySelector('.calendar-grid');
            // Clear existing days (keeping headers)
            while (calendarGrid.children.length > 7) {
                calendarGrid.removeChild(calendarGrid.lastChild);
            }

            const today = new Date();
            const year = today.getFullYear();
            const month = today.getMonth();

            // First day of month
            const firstDay = new Date(year, month, 1);
            // Last day of month
            const lastDay = new Date(year, month + 1, 0);

            // Days in month
            const daysInMonth = lastDay.getDate();

            // Start day of week (0 = Sunday, 1 = Monday, etc.)
            const startDay = firstDay.getDay();

            // Add empty cells for days before the first day of month
            for (let i = 0; i < startDay; i++) {
                const emptyDay = document.createElement('div');
                emptyDay.className = 'calendar-day';
                calendarGrid.appendChild(emptyDay);
            }

            // Add days of the month
            for (let i = 1; i <= daysInMonth; i++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';

                // Check if today
                if (i === today.getDate() && month === today.getMonth()) {
                    dayElement.classList.add('today');
                }

                // Add some sample tasks on specific days
                if ([5, 12, 19, 26].includes(i)) {
                    dayElement.classList.add('has-task');
                    dayElement.innerHTML = `${i}<br><span style="font-size:10px;">üíß</span>`;
                } else {
                    dayElement.textContent = i;
                }

                calendarGrid.appendChild(dayElement);
            }
        }

        function changeCalendarMonth(direction) {
            // This would update the calendar to show next/previous month
            showNotification(`Calendar navigation would show ${direction > 0 ? 'next' : 'previous'} month`);
            generateCalendar();
        }

        // Notification system
        function showNotification(message) {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.innerHTML = message;

            // Add to body
            document.body.appendChild(notification);

            // Animate in
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);

            // Remove after 5 seconds
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 5000);
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function () {
            // Set up drag and drop for image upload
            const imageUpload = document.getElementById('imageUpload');
            if (imageUpload) {
                imageUpload.addEventListener('dragover', function (e) {
                    e.preventDefault();
                    this.classList.add('dragover');
                });

                imageUpload.addEventListener('dragleave', function () {
                    this.classList.remove('dragover');
                });

                imageUpload.addEventListener('drop', function (e) {
                    e.preventDefault();
                    this.classList.remove('dragover');

                    // Simulate file input
                    if (e.dataTransfer.files.length) {
                        document.getElementById('imageInput').files = e.dataTransfer.files;
                        handleImageUpload({ target: { files: e.dataTransfer.files } });
                    }
                });
            }

            // Generate calendar
            generateCalendar();

            // Show welcome notification
            setTimeout(() => {
                showNotification("Welcome to CropCare! How can I help with your farming today? üåæ");
            }, 1000);
        });
    </script>
</body>
</html>
